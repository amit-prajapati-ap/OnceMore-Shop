import{g as p,s as L,p as T}from"./product-H7mRC7Vw.js";const f=(n,e)=>{let t=p().find(o=>o.id==n),r=1;return t&&(r=t.quantity,e=t.price),{quantity:r,price:e}},m=()=>{const n=document.querySelector(".productSubTotal");let e=0;const l=document.querySelector(".productTax");let t=0;const r=document.querySelector(".productFinalTotal");let o=p();o.length?document.querySelector(".Summary").style.display="flex":document.querySelector(".Summary").style.display="none",o.forEach(i=>{e+=i.price}),t=e*.18,n.innerHTML=`₹${e.toFixed()}`,l.innerHTML=`₹${t.toFixed()}`,r.innerHTML=`₹${(t+e).toFixed()}`},C=(n,e,l,t)=>{const r=document.querySelector(`#card${e}`),o=r.querySelector(".productQuantity"),i=r.querySelector(".productPrice");let c=1,u=0,s=p(),y=s.find(d=>d.id==e);y?(c=y.quantity,u=y.price):u=t,n.target.classList.contains("cartIncrement")?c<l?c++:c===l&&(c=l,u=t*c):n.target.classList.contains("cartDecrement")&&c>1&&c--,u=t*c;let a={id:e,quantity:c,price:u};a=s.map(d=>d.id==e?a:d),localStorage.setItem("cartProductLS",JSON.stringify(a)),i.innerHTML=u.toFixed(2),o.innerHTML=c,m()},P=(n,e)=>{let l=p();l=l.filter(o=>o.id!=e),localStorage.setItem("cartProductLS",JSON.stringify(l)),document.querySelector(`#card${e}`).parentElement.remove();let r=parseInt(localStorage.getItem("cart"));r--,localStorage.setItem("cart",`${r}`),m(),r==0&&(document.querySelector(".emptyCart").style.display="block",document.querySelector(".Summary").style.display="none"),L(!1,e)},q=document.querySelector("#productCartContainer"),H=document.querySelector("#productCartTemplate");let g=p(),I=T.filter(n=>g.some(e=>e.id===n.id));(()=>{I.forEach(t=>{let r=document.querySelector("#placeOrderBtn");r.style.display="block",document.querySelector(".Summary").style.display="block",q.style.display="block",document.querySelector(".emptyCart").style.display="none";const{id:o,name:i,category:c,image:u,price:s,stock:y}=t,a=document.importNode(H.content,!0),d=f(o,s);a.querySelector(".card").setAttribute("id",`card${o}`),a.querySelector(".category").innerHTML=c,a.querySelector(".productImage").src=u,a.querySelector(".productName").innerHTML=i,a.querySelector(".productPrice").innerHTML="₹"+d.price.toFixed(2),a.querySelector(".productQuantity").innerHTML=d.quantity,a.querySelector(".remove-to-cart-button").addEventListener("click",S=>{P(S,o),document.querySelector(".headerCartButton").innerHTML=localStorage.getItem("cart")}),a.querySelector(".stockElement").addEventListener("click",S=>{C(S,o,y,s)}),q.appendChild(a)}),document.querySelector(".headerCartButton").innerHTML=localStorage.getItem("cart"),m();let n=document.querySelector(".popup"),e=document.querySelector("#placeOrderBtn"),l=document.querySelector("#okButton");e.addEventListener("click",()=>{n.classList.add("open-popup")}),l.addEventListener("click",()=>{localStorage.setItem("cart","0"),g=[],localStorage.setItem("cartProductLS",JSON.stringify(g)),document.querySelector(".emptyCart").style.display="block",e.style.display="none",q.style.display="none",document.querySelector(".headerCartButton").innerHTML=localStorage.getItem("cart"),m(),n.classList.remove("open-popup")})})();
